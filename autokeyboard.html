<HTML>
<HEAD>
<TITLE>"autokeyboard" Form</TITLE>
<SCRIPT LANGUAGE="JavaScript">
function testResults (kind, form) {
	var IPAddress = form.ip_address.value;
	if (kind == "type") {
		var InputCommand = encodeURIComponent(form.type_command.value);
		InputCommand = InputCommand.replace(/!/g, "%21");
		InputCommand = InputCommand.replace(/'/g, "%27");
		InputCommand = InputCommand.replace(/\(/g, "%28");
		InputCommand = InputCommand.replace(/\)/g, "%29");
		InputCommand = InputCommand.replace(/\*/g, "%2A");
		InputCommand = InputCommand.replace(/\~/g, "%2D");
		var theURL = "http://" + IPAddress + "/arduino/type/" + InputCommand;
	}
	if (kind == "keys") {
		var InputCommand = form.keys_command.value;
		var theURL = "http://" + IPAddress + "/arduino/keys/" + InputCommand;
	}
//	alert ("The URL is: " + theURL);
//	window.open(theURL);
	setTimeout(function sendRequest(url) {
		var XMLHttp;
		XMLHttp=new XMLHttpRequest();
		XMLHttp.open("POST",theURL,true);
		XMLHttp.send();
	},3000);
};



function searchTypeCommand(e)
{
	if (e.keyCode == 13) {
		document.getElementById("type_btn").click();
	}
	return false;
};

function searchKeysCommand(e)
{
	if (e.keyCode == 13) {
		document.getElementById("keys_btn").click();
	}
	return false;
};
</SCRIPT>
</HEAD>
<BODY>
<FORM NAME="autokeyboard_form" ACTION="" METHOD="GET">Enter the Yun's IP Address: <BR />
<INPUT TYPE="text" NAME="ip_address" VALUE="" /><P />
Enter what you want to type:<BR />
<INPUT TYPE="text" NAME="type_command" VALUE="" onkeypress="searchTypeCommand(event);"/><P />
<INPUT TYPE="button" NAME="button" Value="Send" id="type_btn" onClick="testResults('type', this.form);" /><P />
Or, enter the key command you want to send:<BR />
<INPUT TYPE="text" NAME="keys_command" VALUE="" onkeypress="searchKeysCommand(event);"/><P />
<INPUT TYPE="button" NAME="button" Value="Send" id="keys_btn" onClick="testResults('keys', this.form);" />
</FORM>
</BODY>
</HTML>
